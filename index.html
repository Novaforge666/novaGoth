<!doctype html><html> <head> <meta charset="utf-8" /> <title>Deriv Starter (Live Prices)</title> <meta name="viewport" content="width=device-width, initial-scale=1" /> <style> body { font-family: system-ui, Arial, sans-serif; margin: 20px; } .row { margin: 10px 0; } #status { padding: 6px 10px; border-radius: 6px; display: inline-block; background:#fde7e7; color:#7a1c1c; } #status.ok { background:#e7f8ee; color:#106a3b; } pre { background:#0b1220; color:#b8c1ec; padding:10px; border-radius:6px; height:140px; overflow:auto; } </style> </head> <body> <h1>Deriv Starter (Live Prices)</h1> <div class="row"> <label>App ID <input id="app_id" value="1089" size="8" /> </label> <button id="connect">Connect</button> <span id="status">Disconnected</span> </div> <div class="row"> <label>Symbol <select id="symbol"> <option value="R_100">R_100 (Synthetic)</option> <option value="frxEURUSD">EURUSD (FX)</option> </select> </label> <button id="subscribe">Start prices</button> <button id="stop">Stop</button> </div> <div class="row" style="font-size:1.2em;"> <strong>Last price:</strong> <span id="price">â€”</span> </div> <h3>Log</h3> <pre id="log"></pre><script> let ws; function setStatus(connected) { const el = document.getElementById('status'); el.textContent = connected ? 'Connected' : 'Disconnected'; el.className = connected ? 'ok' : ''; } function log(line) { const el = document.getElementById('log'); el.textContent += line + '\n'; el.scrollTop = el.scrollHeight; } function send(msg) { if (!ws || ws.readyState !== 1) return alert('Not connected yet.'); ws.send(JSON.stringify(msg)); } document.getElementById('connect').onclick = () => { const appId = document.getElementById('app_id').value.trim(); const url = `wss://ws.derivws.com/websockets/v3?app_id=${encodeURIComponent(appId)}`; ws = new WebSocket(url); ws.onopen = () => { setStatus(true); log('Connected'); }; ws.onclose = () => { setStatus(false); log('Disconnected'); }; ws.onerror = () => log('WebSocket error'); ws.onmessage = (msg) => { const data = JSON.parse(msg.data); if (data.error) { alert(data.error.message || 'API error'); return; } if (data.msg_type === 'tick' && data.tick) { document.getElementById('price').textContent = `${data.tick.symbol}: ${data.tick.quote}`; } }; }; document.getElementById('subscribe').onclick = () => { const symbol = document.getElementById('symbol').value; send({ ticks: symbol, subscribe: 1 }); log('Subscribed to ' + symbol); }; document.getElementById('stop').onclick = () => { // Forget all tick subscriptions (simple way) send({ forget_all: 'ticks' }); log('Stopped tick subscriptions'); }; </script></body> </html>
